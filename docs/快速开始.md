# 快速开始

## 目录
1. [简介](#简介)
2. [系统要求与安装方式](#系统要求与安装方式)
3. [核心安装流程](#核心安装流程)
4. [向导驱动的安装（openclaw onboard）](#向导驱动的安装openclaw-onboard)
5. [多平台安装指导](#多平台安装指导)
6. [基础 CLI 命令示例](#基础-cli-命令示例)
7. [常见问题与故障排除](#常见问题与故障排除)
8. [结语](#结语)

## 简介
OpenClaw 是一款可在本地设备上运行的个人 AI 助手，支持在你已使用的聊天渠道（如 WhatsApp、Telegram、Slack、Discord、Google Chat、Signal、iMessage、Microsoft Teams、WebChat 等）中进行对话，并可扩展到更多渠道与技能。其核心是“网关（Gateway）”，作为会话、通道、工具与事件的控制平面；同时提供 CLI、网页控制界面与跨平台应用。

本快速开始指南面向首次使用者，覆盖从安装到首次使用的完整流程，重点包括：
- 系统要求（Node.js ≥22）
- 多种安装方式（npm、pnpm、bun）
- 向导驱动的安装流程（`openclaw onboard`）
- 网关守护进程安装、工作空间配置、渠道连接设置
- 不同平台（macOS、Linux、Windows WSL2）的具体安装指导
- 基本 CLI 命令使用示例（启动网关、发送消息、代理交互等）
- 常见安装问题与故障排除

## 系统要求与安装方式
- 运行时：Node.js ≥22（推荐版本见工程元数据）
- 支持平台：macOS、Linux、Windows（强烈建议通过 WSL2 使用 Linux 环境）
- 安装方式：推荐使用官方安装脚本；也可选择全局安装或从源码构建

## 核心安装流程
以下为推荐的“一键安装 + 向导配置”流程，适合大多数用户：

1) 获取并运行安装脚本
   - macOS/Linux：使用 curl 安装脚本
   - Windows：使用 PowerShell 安装脚本

2) 运行向导（`openclaw onboard`）
   - 选择本地或远程网关模式
   - 配置模型与认证（OAuth 或 API Key）
   - 设置工作空间与技能
   - 可选：安装后台服务（macOS LaunchAgent / Linux systemd 用户服务）

3) 启动网关
   - 使用服务自动启动，或手动运行 `openclaw gateway`
   - 打开 Dashboard（控制界面）验证连通性

4) 验证健康状态
   - 使用 `openclaw health` 与 `openclaw doctor` 检查配置与连通性

## 向导驱动的安装（openclaw onboard）
`openclaw onboard` 是引导式安装的核心入口，覆盖以下关键步骤：
- 本地/远程网关模式选择
- 认证配置（OpenAI Code（Codex）OAuth、Anthropic API Key、Claude `setup-token` 等）
- 工作空间位置与默认文件
- 网关端口、绑定地址、鉴权模式、Tailscale 暴露
- 渠道配置（Telegram、WhatsApp、Discord、Google Chat、Mattermost 插件、Signal 等）
- 守护进程安装（macOS LaunchAgent / Linux systemd 用户服务）
- 健康检查与技能安装（可选）

向导支持两种模式：
- QuickStart：采用默认值，快速完成最小可用配置
- Advanced：逐项配置所有参数

非交互模式（自动化/脚本）：
- 使用 `--non-interactive` 与相关参数（如 `--auth-choice`、`--gateway-port`、`--daemon-runtime` 等）实现无人值守安装

## 多平台安装指导
- macOS
  - 推荐使用官方菜单栏应用作为网关代理与权限管理器
  - 支持本地/远程模式，本地模式下可通过 launchd 管理网关生命周期
  - 可选安装 CLI（不建议使用 bun 运行网关）

- Linux
  - 网关完全支持 Linux，推荐使用 Node 运行时
  - 守护进程使用 systemd 用户服务，默认启用以随用户登录启动
  - 可通过 ssh 端口转发访问本地网关 Dashboard

- Windows（WSL2）
  - 强烈建议通过 WSL2（Ubuntu）安装与运行
  - 在 WSL2 中启用 systemd，以便正确安装与管理网关服务
  - 如需局域网访问，可使用 netsh portproxy 将 Windows 端口转发至 WSL IP

## 基础 CLI 命令示例
以下命令适用于首次使用与日常运维场景：

- 启动网关与查看状态
  - 启动网关：`openclaw gateway`
  - 查看服务状态：`openclaw gateway status`
  - 健康检查：`openclaw health`
  - 端口探测与发现：`openclaw gateway discover`

- 发送消息与渠道操作
  - 发送消息：`openclaw message send`
  - 表情反应：`openclaw message react`
  - 轮询/投票：`openclaw message poll`
  - 广播消息：`openclaw message broadcast`

- 代理交互
  - 单次代理回合：`openclaw agent`
  - 指定代理与会话：`openclaw agent --agent-id <id> --session-id <sid>`

- 配对与安全
  - 列出待批准的配对请求：`openclaw pairing list <channel>`
  - 批准配对请求：`openclaw pairing approve <channel> <code>`

- 健康巡检与修复
  - 健康检查与修复：`openclaw doctor`
  - 深度检查：`openclaw doctor --deep`

## 常见问题与故障排除
- 安装后 openclaw 命令不可用（PATH 未包含全局 npm bin）
  - 诊断：检查 `node -v`、`npm -v`、`npm prefix -g` 与 `echo "$PATH"`
  - 解决：将 `$(npm prefix -g)/bin`（macOS/Linux）或 `$(npm prefix -g)`（Windows）加入 PATH，并重新打开终端

- Windows WSL2 端口转发
  - 若需要从其他机器访问 WSL 内的网关或服务，需使用 `netsh interface portproxy` 将 Windows 端口转发到 WSL IP，并在防火墙放行相应端口

- macOS launchd 环境变量冲突
  - 如果之前通过 `launchctl setenv` 设置了 `OPENCLAW_GATEWAY_TOKEN`/`PASSWORD`，可能导致“未授权”错误
  - 解决：使用 `launchctl getenv` 检查并 `unsetenv` 对应键

- Bun 运行网关导致 WhatsApp/Telegram 问题
  - 建议使用 Node 运行网关（Bun 不推荐用于这些渠道）

- 首次 DM 无响应
  - 默认 DM 配对策略为“未知发件人需先配对”，收到配对码后使用 `openclaw pairing approve  <channel> <code>` 批准

- 更新与迁移
  - 使用更新文档进行升级；升级后运行 `openclaw doctor` 进行健康检查

## 结语
通过本指南，你已完成 OpenClaw 的安装与首次配置，掌握了向导安装流程、多平台部署要点以及常用 CLI 命令。建议后续深入阅读：
- 网关运行与远程访问
- 渠道配置与配对策略
- 安全与权限管理
- 技能与工具生态

祝你在 OpenClaw 上获得顺畅、安全且强大的个人智能体验。